;Program compiled by Great Cow BASIC (1.00.00 Release Candidate 2022-09-11 (Windows 64 bit) : Build 1168x) for Microchip PIC-AS
;  See the GCBASIC forums at http://sourceforge.net/projects/gcbasic/forums,
;  Check the documentation and Help at http://gcbasic.sourceforge.net/help/,
;or, email:
;   evanvennn at users dot sourceforge dot net

;********************************************************************************


;Set up the assembler options (Chip type, clock source, other bits and pieces)
;PROCESSOR   16F18075
 PAGEWIDTH   180
 RADIX       DEC
 TITLE       "d:\GreatCowBASICGits\Demonstration_Sources.git\trunk\Vendor_Boards\Great_Cow_Basic_Demo_Board\16f18075_chiprange_demonstrations\150_show_i2c_devices_to_serial_terminal.s"
 SUBTITLE    "09-11-2022"

; Reverse lookup file(s)
; C:\Program Files\Microchip\xc8\v2.40\pic\include\proc\pic16f18075.inc
; C:\Program Files\Microchip\xc8\v2.40\pic\dat\cfgmap\16f18075.cfgmap
; Alternative CONFIG file is to be found at C:\Program Files\Microchip\xc8\vX.YY\pic\dat\cfgdata as per Microchip support ticket #00730936 

;********************************************************************************

;********************************************************************************
;Explicit CONFIG
 CONFIG CLKOUTEN=OFF                             ;C1 Reverselookup CLKOUTEN = OFF
 CONFIG RSTOSC=HFINTOSC_32MHz                    ;C1 Reverselookup RSTOSC = HFINTOSC_32MHZ
 CONFIG FEXTOSC=OFF                              ;C1 Reverselookup FEXTOSC = OFF
 CONFIG WDTE=OFF                                 ;C1 Reverselookup WDTE = OFF
 CONFIG MCLRE=INTMCLR                            ;C1 Reverselookup MCLRE = INTMCLR
 CONFIG LVP=OFF                                  ;C1 Reverselookup LVP = OFF
 CONFIG WRTSAF=OFF                               ;C1 Reverselookup WRTSAF = OFF
 CONFIG WRTD=OFF                                 ;C1 Reverselookup WRTD = OFF
 CONFIG WRTB=OFF                                 ;C1 Reverselookup WRTB = OFF
 CONFIG CPD=OFF                                  ;C1 Reverselookup CPD = OFF
 CONFIG CP=OFF                                   ;C1 Reverselookup CP = OFF
;Inferred CONFIG


;********************************************************************************
; The XC8 xc.inc include file.  This MUST be placed after the CONFIG statements.

 #include <xc.inc>

;********************************************************************************

;Set aside RAM memory locations for variables. All variables are global.
 COMPORT                          EQU 32          ; 0X20
 DELAYTEMP                        EQU 112          ; 0X70
 DELAYTEMP2                       EQU 113          ; 0X71
 DEVICEID                         EQU 33          ; 0X21
 DISPLAYNEWLINE                   EQU 34          ; 0X22
 HI2CACKPOLLSTATE                 EQU 35          ; 0X23
 HI2CCURRENTMODE                  EQU 36          ; 0X24
 HI2CWAITMSSPTIMEOUT              EQU 37          ; 0X25
 HSERPRINTCRLFCOUNT               EQU 38          ; 0X26
 I2CBYTE                          EQU 39          ; 0X27
 PRINTLEN                         EQU 40          ; 0X28
 SERDATA                          EQU 41          ; 0X29
 STRINGPOINTER                    EQU 42          ; 0X2A
 SYSBYTETEMPA                     EQU 117          ; 0X75
 SYSBYTETEMPB                     EQU 121          ; 0X79
 SYSBYTETEMPX                     EQU 112          ; 0X70
 SYSDIVLOOP                       EQU 116          ; 0X74
 SYSPRINTDATAHANDLER              EQU 43          ; 0X2B
 SYSPRINTDATAHANDLER_H            EQU 44          ; 0X2C
 SYSPRINTTEMP                     EQU 45          ; 0X2D
 SYSREPEATTEMP1                   EQU 46          ; 0X2E
 SYSSTRINGA                       EQU 119          ; 0X77
 SYSSTRINGA_H                     EQU 120          ; 0X78
 SYSSTRINGTEMP                    EQU 47          ; 0X2F
 SYSTEMP1                         EQU 48          ; 0X30
 SYSTEMP2                         EQU 49          ; 0X31
 SYSVALTEMP                       EQU 50          ; 0X32
 SYSWAITTEMPMS                    EQU 114          ; 0X72
 SYSWAITTEMPMS_H                  EQU 115          ; 0X73
 SYSWAITTEMPS                     EQU 116          ; 0X74
 _HEXPICAS                        EQU 124          ; 0X7C

;********************************************************************************

;ALIAS VARIABLES
 AFSR0                            EQU 4
 AFSR0_H                          EQU 5
 SYS_HEXPICAS_0                   EQU 124
 SYS_HEXPICAS_1                   EQU 125
 SYS_HEXPICAS_2                   EQU 126

;********************************************************************************

 PSECT   PROGMEM0,delta=2, abs
 RESETVEC:
;VECTORS
	ORG	0
	PAGESEL	BASPROGRAMSTART
	GOTO	BASPROGRAMSTART
	ORG	4
	RETFIE

;********************************************************************************

;START OF PROGRAM MEMORY PAGE 0
	ORG	5
BASPROGRAMSTART:
;CALL INITIALISATION ROUTINES
	CALL	INITSYS
	CALL	INITPPS
	CALL	INITUSART
	CALL	HI2CINIT

;START OF THE MAIN PROGRAM
	BCF	TRISB,1
	BCF	TRISB,2
	BCF	TRISB,3
	BCF	TRISB,4
	BSF	TRISA,0
	BSF	TRISB,5
	BSF	TRISC,4
	BSF	TRISC,3
	MOVLW	12
	MOVWF	HI2CCURRENTMODE
	CALL	HI2CMODE
	MOVLW	1
	MOVWF	SYSWAITTEMPS
	CALL	DELAY_S
SYSDOLOOP_S1:
	MOVLW	1
	MOVWF	HSERPRINTCRLFCOUNT
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINTCRLF
	MOVLW	LOW STRINGTABLE1
	MOVWF	SYSPRINTDATAHANDLER
	MOVLW	(HIGH STRINGTABLE1) | 128
	MOVWF	SYSPRINTDATAHANDLER_H
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINT304
	MOVLW	2
	MOVWF	HSERPRINTCRLFCOUNT
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINTCRLF
	MOVLW	1
	MOVWF	HSERPRINTCRLFCOUNT
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINTCRLF
	MOVLW	LOW STRINGTABLE2
	MOVWF	SYSPRINTDATAHANDLER
	MOVLW	(HIGH STRINGTABLE2) | 128
	MOVWF	SYSPRINTDATAHANDLER_H
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINT304
	MOVLW	255
	MOVWF	DEVICEID
SYSFORLOOP1:
	INCF	DEVICEID,F
	MOVF	DEVICEID,W
	MOVWF	SYSVALTEMP
	CALL	FN__HEXPICAS
	MOVLW	LOW _HEXPICAS
	MOVWF	SYSPRINTDATAHANDLER
	MOVLW	HIGH _HEXPICAS
	MOVWF	SYSPRINTDATAHANDLER_H
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINT304
	MOVLW	LOW STRINGTABLE3
	MOVWF	SYSPRINTDATAHANDLER
	MOVLW	(HIGH STRINGTABLE3) | 128
	MOVWF	SYSPRINTDATAHANDLER_H
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINT304
	MOVLW	15
	SUBWF	DEVICEID,W
	BTFSS	STATUS,0
	GOTO	SYSFORLOOP1
SYSFORLOOPEND1:
	MOVLW	255
	MOVWF	DEVICEID
SYSFORLOOP2:
	INCF	DEVICEID,F
	MOVF	DEVICEID,W
	MOVWF	SYSBYTETEMPA
	MOVLW	16
	MOVWF	SYSBYTETEMPB
	CALL	SYSDIVSUB
	MOVF	SYSBYTETEMPX,W
	MOVWF	DISPLAYNEWLINE
	MOVF	DISPLAYNEWLINE,F
	BTFSS	STATUS,2
	GOTO	ENDIF2
	MOVLW	1
	MOVWF	HSERPRINTCRLFCOUNT
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINTCRLF
	MOVF	DEVICEID,W
	MOVWF	SYSVALTEMP
	CALL	FN__HEXPICAS
	MOVLW	LOW _HEXPICAS
	MOVWF	SYSPRINTDATAHANDLER
	MOVLW	HIGH _HEXPICAS
	MOVWF	SYSPRINTDATAHANDLER_H
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINT304
	MOVF	DISPLAYNEWLINE,W
	SUBLW	0
	BTFSC	STATUS,0
	GOTO	ENDIF5
	MOVLW	LOW STRINGTABLE3
	MOVWF	SYSPRINTDATAHANDLER
	MOVLW	(HIGH STRINGTABLE3) | 128
	MOVWF	SYSPRINTDATAHANDLER_H
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINT304
ENDIF5:
ENDIF2:
	MOVLW	LOW STRINGTABLE3
	MOVWF	SYSPRINTDATAHANDLER
	MOVLW	(HIGH STRINGTABLE3) | 128
	MOVWF	SYSPRINTDATAHANDLER_H
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINT304
	CALL	HI2CSTART
	INCF	HI2CWAITMSSPTIMEOUT,W
	BTFSC	STATUS,2
	GOTO	ELSE3_1
	MOVF	DEVICEID,W
	MOVWF	I2CBYTE
	CALL	HI2CSEND
	MOVF	HI2CACKPOLLSTATE,F
	BTFSS	STATUS,2
	GOTO	ELSE6_1
	CLRF	I2CBYTE
	CALL	HI2CSEND
	MOVF	DEVICEID,W
	MOVWF	SYSVALTEMP
	CALL	FN__HEXPICAS
	MOVLW	LOW _HEXPICAS
	MOVWF	SYSPRINTDATAHANDLER
	MOVLW	HIGH _HEXPICAS
	MOVWF	SYSPRINTDATAHANDLER_H
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINT304
	GOTO	ENDIF6
ELSE6_1:
	MOVLW	LOW STRINGTABLE4
	MOVWF	SYSPRINTDATAHANDLER
	MOVLW	(HIGH STRINGTABLE4) | 128
	MOVWF	SYSPRINTDATAHANDLER_H
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINT304
ENDIF6:
	CALL	HI2CSTOP
	GOTO	ENDIF3
ELSE3_1:
	MOVLW	LOW STRINGTABLE5
	MOVWF	SYSPRINTDATAHANDLER
	MOVLW	(HIGH STRINGTABLE5) | 128
	MOVWF	SYSPRINTDATAHANDLER_H
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINT304
ENDIF3:
	MOVLW	255
	SUBWF	DEVICEID,W
	BTFSS	STATUS,0
	GOTO	SYSFORLOOP2
SYSFORLOOPEND2:
	MOVLW	2
	MOVWF	HSERPRINTCRLFCOUNT
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINTCRLF
	MOVLW	LOW STRINGTABLE6
	MOVWF	SYSPRINTDATAHANDLER
	MOVLW	(HIGH STRINGTABLE6) | 128
	MOVWF	SYSPRINTDATAHANDLER_H
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINT304
	MOVLW	2
	MOVWF	HSERPRINTCRLFCOUNT
	MOVLW	1
	MOVWF	COMPORT
	CALL	HSERPRINTCRLF
	MOVLW	1
	MOVWF	SYSWAITTEMPS
	CALL	DELAY_S
SYSWAITLOOP1:
	BTFSC	PORTB,5
	GOTO	SYSWAITLOOP1
	GOTO	SYSDOLOOP_S1
SYSDOLOOP_E1:
BASPROGRAMEND:
	SLEEP
	GOTO	BASPROGRAMEND

;********************************************************************************

DELAY_MS:
	INCF	SYSWAITTEMPMS_H, F
DMS_START:
	MOVLW	108
	MOVWF	DELAYTEMP2
DMS_OUTER:
	MOVLW	11
	MOVWF	DELAYTEMP
DMS_INNER:
	DECFSZ	DELAYTEMP, F
	GOTO	DMS_INNER
	DECFSZ	DELAYTEMP2, F
	GOTO	DMS_OUTER
	DECFSZ	SYSWAITTEMPMS, F
	GOTO	DMS_START
	DECFSZ	SYSWAITTEMPMS_H, F
	GOTO	DMS_START
	RETURN

;********************************************************************************

DELAY_S:
DS_START:
	MOVLW	232
	MOVWF	SYSWAITTEMPMS
	MOVLW	3
	MOVWF	SYSWAITTEMPMS_H
	CALL	DELAY_MS
	DECFSZ	SYSWAITTEMPS, F
	GOTO	DS_START
	RETURN

;********************************************************************************

HI2CINIT:
;asm showdebug  This method sets the variable `HI2CCurrentMode`, and, if required calls the method `SI2CInit` to set up new MSSP modules - aka K42s family chips
	CLRF	HI2CCURRENTMODE
	RETURN

;********************************************************************************

HI2CMODE:
;asm showdebug  This method sets the variable `HI2CCurrentMode`, and, if required, sets the SSPCON1.bits
	BANKSEL	SSP1STAT
	BSF	SSP1STAT,7
	BSF	SSP1CON1,4
	BCF	SSP1CON1,7
	MOVLW	12
	BANKSEL	HI2CCURRENTMODE
	SUBWF	HI2CCURRENTMODE,W
	BTFSS	STATUS,2
	GOTO	ENDIF12
	BANKSEL	SSP1CON1
	BSF	SSP1CON1,3
	BCF	SSP1CON1,2
	BCF	SSP1CON1,1
	BCF	SSP1CON1,0
	MOVLW	39
	MOVWF	SSP1ADD
ENDIF12:
	BANKSEL	HI2CCURRENTMODE
	MOVF	HI2CCURRENTMODE,F
	BTFSS	STATUS,2
	GOTO	ENDIF13
	BANKSEL	SSP1CON1
	BCF	SSP1CON1,3
	BSF	SSP1CON1,2
	BSF	SSP1CON1,1
	BCF	SSP1CON1,0
ENDIF13:
	MOVLW	3
	BANKSEL	HI2CCURRENTMODE
	SUBWF	HI2CCURRENTMODE,W
	BTFSS	STATUS,2
	GOTO	ENDIF14
	BANKSEL	SSP1CON1
	BCF	SSP1CON1,3
	BSF	SSP1CON1,2
	BSF	SSP1CON1,1
	BSF	SSP1CON1,0
ENDIF14:
	BANKSEL	SSP1CON1
	BSF	SSP1CON1,5
	BANKSEL	STATUS
	RETURN

;********************************************************************************

HI2CSEND:
;asm showdebug  This method sets the registers and register bits to send I2C data
RETRYHI2CSEND:
	BANKSEL	SSP1CON1
	BCF	SSP1CON1,7
	BANKSEL	I2CBYTE
	MOVF	I2CBYTE,W
	BANKSEL	SSP1BUF
	MOVWF	SSP1BUF
	BANKSEL	STATUS
	CALL	HI2CWAITMSSP
	BANKSEL	SSP1CON2
	BTFSS	SSP1CON2,6
	GOTO	ELSE17_1
	MOVLW	255
	BANKSEL	HI2CACKPOLLSTATE
	MOVWF	HI2CACKPOLLSTATE
	GOTO	ENDIF17
ELSE17_1:
	BANKSEL	HI2CACKPOLLSTATE
	CLRF	HI2CACKPOLLSTATE
ENDIF17:
	BANKSEL	SSP1CON1
	BTFSS	SSP1CON1,7
	GOTO	ENDIF18
	BANKSEL	HI2CCURRENTMODE
	MOVF	HI2CCURRENTMODE,W
	SUBLW	10
	BTFSC	STATUS,0
	GOTO	RETRYHI2CSEND
ENDIF18:
	BANKSEL	HI2CCURRENTMODE
	MOVF	HI2CCURRENTMODE,W
	SUBLW	10
	BTFSS	STATUS,0
	GOTO	ENDIF19
	BANKSEL	SSP1CON1
	BSF	SSP1CON1,4
ENDIF19:
	BANKSEL	STATUS
	RETURN

;********************************************************************************

HI2CSTART:
;asm showdebug  This method sets the registers and register bits to generate the I2C  START signal
	MOVF	HI2CCURRENTMODE,W
	SUBLW	10
	BTFSC	STATUS,0
	GOTO	ELSE15_1
	BANKSEL	SSP1CON2
	BSF	SSP1CON2,0
	BANKSEL	STATUS
	CALL	HI2CWAITMSSP
	GOTO	ENDIF15
ELSE15_1:
SYSWAITLOOP2:
	BANKSEL	SSP1STAT
	BTFSS	SSP1STAT,3
	GOTO	SYSWAITLOOP2
ENDIF15:
	BANKSEL	STATUS
	RETURN

;********************************************************************************

HI2CSTOP:
	MOVF	HI2CCURRENTMODE,W
	SUBLW	10
	BTFSC	STATUS,0
	GOTO	ELSE16_1
SYSWAITLOOP3:
	BANKSEL	SSP1STAT
	BTFSC	SSP1STAT,2
	GOTO	SYSWAITLOOP3
	BSF	SSP1CON2,2
	BSF	SSP1CON2,2
	BANKSEL	STATUS
	CALL	HI2CWAITMSSP
	GOTO	ENDIF16
ELSE16_1:
SYSWAITLOOP4:
	BANKSEL	SSP1STAT
	BTFSS	SSP1STAT,4
	GOTO	SYSWAITLOOP4
ENDIF16:
	BANKSEL	STATUS
	RETURN

;********************************************************************************

HI2CWAITMSSP:
	CLRF	HI2CWAITMSSPTIMEOUT
HI2CWAITMSSPWAIT:
	BANKSEL	HI2CWAITMSSPTIMEOUT
	INCF	HI2CWAITMSSPTIMEOUT,F
	MOVLW	255
	SUBWF	HI2CWAITMSSPTIMEOUT,W
	BTFSC	STATUS,0
	GOTO	ENDIF21
	BANKSEL	PIR3
	BTFSS	PIR3,6
	GOTO	HI2CWAITMSSPWAIT
	BCF	PIR3,6
ENDIF21:
	BANKSEL	STATUS
	RETURN

;********************************************************************************

HSERPRINT304:
	MOVF	SYSPRINTDATAHANDLER,W
	MOVWF	FSR0L
	MOVF	SYSPRINTDATAHANDLER_H,W
	MOVWF	FSR0H
	MOVF	INDF0,W
	MOVWF	PRINTLEN
	MOVF	PRINTLEN,F
	BTFSC	STATUS,2
	GOTO	ENDIF10
	MOVLW	1
	MOVWF	SYSPRINTTEMP
SYSFORLOOP4:
	MOVF	SYSPRINTTEMP,W
	ADDWF	SYSPRINTDATAHANDLER,W
	MOVWF	FSR0L
	MOVLW	0
	ADDWFC	SYSPRINTDATAHANDLER_H,W
	MOVWF	FSR0H
	MOVF	INDF0,W
	MOVWF	SERDATA
	CALL	HSERSEND294
	MOVF	SYSPRINTTEMP,W
	SUBWF	PRINTLEN,W
	MOVWF	SYSTEMP1
	MOVWF	SYSBYTETEMPA
	CLRF	SYSBYTETEMPB
	CALL	SYSCOMPEQUAL
	COMF	SYSBYTETEMPX,F
	BTFSS	SYSBYTETEMPX,0
	GOTO	ENDIF11
	INCF	SYSPRINTTEMP,F
	GOTO	SYSFORLOOP4
ENDIF11:
SYSFORLOOPEND4:
ENDIF10:
	RETURN

;********************************************************************************

HSERPRINTCRLF:
	MOVF	HSERPRINTCRLFCOUNT,W
	MOVWF	SYSREPEATTEMP1
	BTFSC	STATUS,2
	GOTO	SYSREPEATLOOPEND1
SYSREPEATLOOP1:
	MOVLW	13
	MOVWF	SERDATA
	CALL	HSERSEND294
	MOVLW	10
	MOVWF	SERDATA
	CALL	HSERSEND294
	DECFSZ	SYSREPEATTEMP1,F
	GOTO	SYSREPEATLOOP1
SYSREPEATLOOPEND1:
	RETURN

;********************************************************************************

HSERSEND294:
	DECF	COMPORT,W
	BTFSS	STATUS,2
	GOTO	ENDIF23
SYSWAITLOOP5:
	BANKSEL	PIR3
	BTFSS	PIR3,2
	GOTO	SYSWAITLOOP5
SYSWAITLOOP6:
	BANKSEL	TX1STA
	BTFSS	TX1STA,1
	GOTO	SYSWAITLOOP6
	BANKSEL	SERDATA
	MOVF	SERDATA,W
	BANKSEL	TX1REG
	MOVWF	TX1REG
	MOVLW	1
	MOVWF	SYSWAITTEMPMS
	CLRF	SYSWAITTEMPMS_H
	BANKSEL	STATUS
	CALL	DELAY_MS
ENDIF23:
	RETURN

;********************************************************************************

INITPPS:
	MOVLW	14
	BANKSEL	RC6PPS
	MOVWF	RC6PPS
	MOVLW	19
	BANKSEL	SSP1CLKPPS
	MOVWF	SSP1CLKPPS
	MOVLW	21
	BANKSEL	RC3PPS
	MOVWF	RC3PPS
	MOVLW	20
	BANKSEL	SSP1DATPPS
	MOVWF	SSP1DATPPS
	MOVLW	22
	BANKSEL	RC4PPS
	MOVWF	RC4PPS
	BANKSEL	STATUS
	RETURN

;********************************************************************************

INITSYS:
;asm showdebug This code block sets the internal oscillator to ChipMHz
	BANKSEL	OSCCON2
	CLRF	OSCCON2
	CLRF	OSCCON3
	MOVLW	4
	MOVWF	OSCFRQ
;asm showdebug _Complete_the_chip_setup_of_BSR,ADCs,ANSEL_and_other_key_setup_registers_or_register_bits
	BANKSEL	ADCON0
	BCF	ADCON0,2
	BCF	ADCON0,7
	BANKSEL	ANSELA
	CLRF	ANSELA
	CLRF	ANSELB
	CLRF	ANSELC
	CLRF	ANSELD
	CLRF	ANSELE
	BANKSEL	CM1CON0
	BCF	CM1CON0,7
	BANKSEL	PORTA
	CLRF	PORTA
	CLRF	PORTB
	CLRF	PORTC
	CLRF	PORTD
	CLRF	PORTE
	RETURN

;********************************************************************************

INITUSART:
	MOVLW	1
	MOVWF	COMPORT
;asm showdebug Values_calculated_in_the_script
;asm showdebug _SPBRGH_TEMP=_ SPBRGH_TEMP
;asm showdebug _SPBRGL_TEMP=_ SPBRGL_TEMP
;asm showdebug _BRG16_TEMP=_ BRG16_TEMP
;asm showdebug _BRGH_TEMP=_ BRGH_TEMP
	MOVLW	159
	BANKSEL	SP1BRGL
	MOVWF	SP1BRGL
	MOVLW	1
	MOVWF	SP1BRGH
	MOVLW	159
	MOVWF	SP1BRGL
	BSF	BAUD1CON,3
	BSF	TX1STA,2
	BCF	TX1STA,4
	BSF	TX1STA,5
	BSF	RC1STA,7
	BSF	RC1STA,4
	BANKSEL	STATUS
	RETURN

;********************************************************************************

SYSCOMPEQUAL:
	CLRF	SYSBYTETEMPX
	MOVF	SYSBYTETEMPA, W
	SUBWF	SYSBYTETEMPB, W
	BTFSC	STATUS,2
	COMF	SYSBYTETEMPX,F
	RETURN

;********************************************************************************

SYSDIVSUB:
	MOVF	SYSBYTETEMPB, F
	BTFSC	STATUS,2
	RETURN
	CLRF	SYSBYTETEMPX
	MOVLW	8
	MOVWF	SYSDIVLOOP
SYSDIV8START:
	BCF	STATUS,0
	RLF	SYSBYTETEMPA, F
	RLF	SYSBYTETEMPX, F
	MOVF	SYSBYTETEMPB, W
	SUBWF	SYSBYTETEMPX, F
	BSF	SYSBYTETEMPA, 0
	BTFSC	STATUS,0
	GOTO	DIV8NOTNEG
	BCF	SYSBYTETEMPA, 0
	MOVF	SYSBYTETEMPB, W
	ADDWF	SYSBYTETEMPX, F
DIV8NOTNEG:
	DECFSZ	SYSDIVLOOP, F
	GOTO	SYSDIV8START
	RETURN

;********************************************************************************

SYSSTRINGTABLES:
	MOVF	SYSSTRINGA_H,W
	MOVWF	PCLATH
	MOVF	SYSSTRINGA,W
	INCF	SYSSTRINGA,F
	BTFSC	STATUS,2
	INCF	SYSSTRINGA_H,F
	MOVWF	PCL

STRINGTABLE1:
	RETLW	13
	RETLW	72	;H
	RETLW	97	;A
	RETLW	114	;R
	RETLW	100	;D
	RETLW	119	;W
	RETLW	97	;A
	RETLW	114	;R
	RETLW	101	;E
	RETLW	32	; 
	RETLW	73	;I
	RETLW	50	;2
	RETLW	67	;C
	RETLW	32	; 


STRINGTABLE2:
	RETLW	3
	RETLW	32	; 
	RETLW	32	; 
	RETLW	32	; 


STRINGTABLE3:
	RETLW	1
	RETLW	32	; 


STRINGTABLE4:
	RETLW	2
	RETLW	45	;-
	RETLW	45	;-


STRINGTABLE5:
	RETLW	2
	RETLW	33	;!
	RETLW	33	;!


STRINGTABLE6:
	RETLW	13
	RETLW	69	;E
	RETLW	110	;N
	RETLW	100	;D
	RETLW	32	; 
	RETLW	111	;O
	RETLW	102	;F
	RETLW	32	; 
	RETLW	83	;S
	RETLW	101	;E
	RETLW	97	;A
	RETLW	114	;R
	RETLW	99	;C
	RETLW	104	;H


;********************************************************************************

FN__HEXPICAS:
	MOVLW	2
	MOVWF	SYS_HEXPICAS_0
	MOVLW	15
	ANDWF	SYSVALTEMP,W
	MOVWF	SYSSTRINGTEMP
	SUBLW	9
	BTFSC	STATUS,0
	GOTO	ENDIF7
	MOVLW	7
	ADDWF	SYSSTRINGTEMP,F
ENDIF7:
	MOVLW	48
	ADDWF	SYSSTRINGTEMP,W
	MOVWF	SYS_HEXPICAS_2
	CLRF	SYSSTRINGTEMP
SYSFORLOOP3:
	INCF	SYSSTRINGTEMP,F
	RRF	SYSVALTEMP,F
	MOVLW	4
	SUBWF	SYSSTRINGTEMP,W
	BTFSS	STATUS,0
	GOTO	SYSFORLOOP3
SYSFORLOOPEND3:
	MOVLW	15
	ANDWF	SYSVALTEMP,W
	MOVWF	SYSSTRINGTEMP
	SUBLW	9
	BTFSC	STATUS,0
	GOTO	ENDIF9
	MOVLW	7
	ADDWF	SYSSTRINGTEMP,F
ENDIF9:
	MOVLW	48
	ADDWF	SYSSTRINGTEMP,W
	MOVWF	SYS_HEXPICAS_1
	RETURN

;********************************************************************************

;START OF PROGRAM MEMORY PAGE 1
	PSECT	PROGMEM1,CLASS=CODE,SPACE=SPACE_CODE,DELTA=2, ABS, OVRLD 
	ORG	2048
;START OF PROGRAM MEMORY PAGE 2
	PSECT	PROGMEM2,CLASS=CODE,SPACE=SPACE_CODE,DELTA=2, ABS, OVRLD 
	ORG	4096
;START OF PROGRAM MEMORY PAGE 3
	PSECT	PROGMEM3,CLASS=CODE,SPACE=SPACE_CODE,DELTA=2, ABS, OVRLD 
	ORG	6144
;
; Declare Power-On-Reset entry point
;
 END     RESETVEC
